<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>js基础 | 小明的docment</title>
    <meta name="description" content="关于小明的文档">
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script")
        hm.src = "https://hm.baidu.com/hm.js?6cd2cc405ca7d5f413790a2181ed53e7"
        var s = document.getElementsByTagName("script")[0]
        s.parentNode.insertBefore(hm, s)
      })()
    </script>
    
    <link rel="preload" href="/assets/css/0.styles.46bcc624.css" as="style"><link rel="preload" href="/assets/js/app.d56d54d5.js" as="script"><link rel="preload" href="/assets/js/19.a9f7b991.js" as="script"><link rel="prefetch" href="/assets/js/10.1a39355f.js"><link rel="prefetch" href="/assets/js/11.1e415d99.js"><link rel="prefetch" href="/assets/js/12.5e9877fa.js"><link rel="prefetch" href="/assets/js/13.51f68b80.js"><link rel="prefetch" href="/assets/js/14.f38e2984.js"><link rel="prefetch" href="/assets/js/15.61779e81.js"><link rel="prefetch" href="/assets/js/16.b0654b1c.js"><link rel="prefetch" href="/assets/js/17.e7ab0c85.js"><link rel="prefetch" href="/assets/js/18.7e238fc2.js"><link rel="prefetch" href="/assets/js/2.0534fa10.js"><link rel="prefetch" href="/assets/js/20.3aad2be6.js"><link rel="prefetch" href="/assets/js/21.4d55085e.js"><link rel="prefetch" href="/assets/js/22.a04f2017.js"><link rel="prefetch" href="/assets/js/23.ed906f1e.js"><link rel="prefetch" href="/assets/js/24.5e680890.js"><link rel="prefetch" href="/assets/js/25.23ef539a.js"><link rel="prefetch" href="/assets/js/26.1a98f261.js"><link rel="prefetch" href="/assets/js/27.4940a424.js"><link rel="prefetch" href="/assets/js/3.c3c01f9a.js"><link rel="prefetch" href="/assets/js/4.c11a2008.js"><link rel="prefetch" href="/assets/js/5.e5b20c49.js"><link rel="prefetch" href="/assets/js/6.da4381e1.js"><link rel="prefetch" href="/assets/js/7.b09efff3.js"><link rel="prefetch" href="/assets/js/8.2983a641.js"><link rel="prefetch" href="/assets/js/9.4ecec881.js">
    <link rel="stylesheet" href="/assets/css/0.styles.46bcc624.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">小明的docment</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">文章</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/mdRules.html" class="nav-link">md语法</a></li><li class="dropdown-item"><!----> <a href="/blog/vue-element.html" class="nav-link">vue-elementUI</a></li><li class="dropdown-item"><!----> <a href="/blog/demo.html" class="nav-link">demo</a></li><li class="dropdown-item"><!----> <a href="/blog/echarts.html" class="nav-link">echarts</a></li><li class="dropdown-item"><!----> <a href="/blog/js基础.html" class="nav-link">js基础</a></li><li class="dropdown-item"><!----> <a href="/blog/vuessr.html" class="nav-link">vuessr</a></li><li class="dropdown-item"><!----> <a href="/blog/mini-program.html" class="nav-link">小程序的坑</a></li><li class="dropdown-item"><!----> <a href="/blog/website.html" class="nav-link">阿里云建站</a></li><li class="dropdown-item"><!----> <a href="/blog/jenkins.html" class="nav-link">jenkins搭建</a></li><li class="dropdown-item"><!----> <a href="/blog/react.html" class="nav-link">react笔记</a></li><li class="dropdown-item"><!----> <a href="/blog/angular.html" class="nav-link">angular笔记</a></li><li class="dropdown-item"><!----> <a href="/blog/h5.html" class="nav-link">H5</a></li><li class="dropdown-item"><!----> <a href="/blog/chrome.html" class="nav-link">chorme</a></li><li class="dropdown-item"><!----> <a href="/blog/mianshi.html" class="nav-link">常见冷知识</a></li><li class="dropdown-item"><!----> <a href="/blog/aa.html" class="nav-link">待整理</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="https://github.com/guangming95" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">文章</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/mdRules.html" class="nav-link">md语法</a></li><li class="dropdown-item"><!----> <a href="/blog/vue-element.html" class="nav-link">vue-elementUI</a></li><li class="dropdown-item"><!----> <a href="/blog/demo.html" class="nav-link">demo</a></li><li class="dropdown-item"><!----> <a href="/blog/echarts.html" class="nav-link">echarts</a></li><li class="dropdown-item"><!----> <a href="/blog/js基础.html" class="nav-link">js基础</a></li><li class="dropdown-item"><!----> <a href="/blog/vuessr.html" class="nav-link">vuessr</a></li><li class="dropdown-item"><!----> <a href="/blog/mini-program.html" class="nav-link">小程序的坑</a></li><li class="dropdown-item"><!----> <a href="/blog/website.html" class="nav-link">阿里云建站</a></li><li class="dropdown-item"><!----> <a href="/blog/jenkins.html" class="nav-link">jenkins搭建</a></li><li class="dropdown-item"><!----> <a href="/blog/react.html" class="nav-link">react笔记</a></li><li class="dropdown-item"><!----> <a href="/blog/angular.html" class="nav-link">angular笔记</a></li><li class="dropdown-item"><!----> <a href="/blog/h5.html" class="nav-link">H5</a></li><li class="dropdown-item"><!----> <a href="/blog/chrome.html" class="nav-link">chorme</a></li><li class="dropdown-item"><!----> <a href="/blog/mianshi.html" class="nav-link">常见冷知识</a></li><li class="dropdown-item"><!----> <a href="/blog/aa.html" class="nav-link">待整理</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="https://github.com/guangming95" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>js基础</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/js%E5%9F%BA%E7%A1%80.html#array" class="sidebar-link">Array</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/js%E5%9F%BA%E7%A1%80.html#sort-与-reverse" class="sidebar-link">sort() 与 reverse()</a></li><li class="sidebar-sub-header"><a href="/blog/js%E5%9F%BA%E7%A1%80.html#reduce-和-reduceright-迭代方法" class="sidebar-link">reduce() 和 reduceRight() 迭代方法</a></li></ul></li><li><a href="/blog/js%E5%9F%BA%E7%A1%80.html#number" class="sidebar-link">Number</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/js%E5%9F%BA%E7%A1%80.html#tofixed-返回指定小数位数-返回格式为字符串" class="sidebar-link">toFixed() 返回指定小数位数(返回格式为字符串)</a></li></ul></li><li><a href="/blog/js%E5%9F%BA%E7%A1%80.html#math" class="sidebar-link">Math</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/js%E5%9F%BA%E7%A1%80.html#random-随机数方法" class="sidebar-link">random() 随机数方法</a></li></ul></li><li><a href="/blog/js%E5%9F%BA%E7%A1%80.html#运算符" class="sidebar-link">运算符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/js%E5%9F%BA%E7%A1%80.html#与-区别" class="sidebar-link">&amp;&amp; 与 &amp; 区别</a></li><li class="sidebar-sub-header"><a href="/blog/js%E5%9F%BA%E7%A1%80.html#与" class="sidebar-link">~ 与 ~~</a></li></ul></li><li><a href="/blog/js%E5%9F%BA%E7%A1%80.html#文件上传" class="sidebar-link">文件上传</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/js%E5%9F%BA%E7%A1%80.html#修改图片上传重命名" class="sidebar-link">修改图片上传重命名</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><p></p><div class="table-of-contents"><ul><li><a href="#array">Array</a><ul><li><a href="#sort-与-reverse">sort() 与 reverse()</a></li><li><a href="#reduce-和-reduceright-迭代方法">reduce() 和 reduceRight() 迭代方法</a></li></ul></li><li><a href="#number">Number</a><ul><li><a href="#tofixed-返回指定小数位数-返回格式为字符串">toFixed() 返回指定小数位数(返回格式为字符串)</a></li></ul></li><li><a href="#math">Math</a><ul><li><a href="#random-随机数方法">random() 随机数方法</a></li></ul></li><li><a href="#运算符">运算符</a><ul><li><a href="#与-区别">&amp;&amp; 与 &amp; 区别</a></li><li><a href="#与">~ 与 ~~</a></li></ul></li><li><a href="#文件上传">文件上传</a><ul><li><a href="#修改图片上传重命名">修改图片上传重命名</a></li></ul></li></ul></div><p></p> <h2 id="array"><a href="#array" aria-hidden="true" class="header-anchor">#</a> Array</h2> <h3 id="sort-与-reverse"><a href="#sort-与-reverse" aria-hidden="true" class="header-anchor">#</a> sort() 与 reverse()</h3> <ol><li>reverse() 数组倒序</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>let values = [1, 2, 3, 4, 5]
values.reverse()
console.log(values) // [5, 4, 3, 2, 1]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li>sort() 排序</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>let values = [0, 1, 5, 10, 15]
values.sort()
console.log(values) // [0, 1, 10, 15, 5]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>例子中值的顺序没有问题，但<code>sort()</code>方法会根据测试字符串的结果改变原来的顺序。因为数值5虽然小于10，但在进行字符串比较时，&quot;10&quot;则位于&quot;5&quot;的前面，于是数组的顺序就被修改了。这种排序方式在很多情况下都不是最佳方案。因此<code>sort()</code>方法可以接收一个比较函数作为参数，以便我们指定哪个值位于哪个值的前面。</p> <p>比较函数接收两个参数，如果第一个参数应该位于第二个之前则返回一个负数，如果两个参数相等则返回0，如果第一个参数应该位于第二个之后则返回一个正数。如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>function compare(value1, value2) {
  if (value1 &lt; value2) {
    return -1
  } else if (value1 &gt; value2) {
    return 1
  } else {
    reutrn 0
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>这个比较函数可以适用于大多数数据类型，只要将其作为参数传递给<code>sort()</code>方法即可，如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let values = [0, 1, 5, 10, 15]
values.sort(compare)
console.log(values)  // [0, 1, 5, 10, 15]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>reverse() 和 sort() 方法的返回值是经过排序之后的数组</p></div> <p>对于数值类型或者其<code>valueOf()</code>方法会返回数值类型的对象类型，可以使用一个更简单的比较函数。这个函数只要用第二个值减第一个值即可。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>function compare1(value1, value2) {
  return value2 - value1
}
let values = [0, 1, 5, 10, 15]
values.sort(compare1)
console.log(values)  // [0, 1, 5, 10, 15]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>由于比较函数通过返回一个小于零、等于零或大于零的值来影响排序结果，因此减法操作就可以适当地处理所有这些情况。</p> <h4 id="使用场景案例"><a href="#使用场景案例" aria-hidden="true" class="header-anchor">#</a> 使用场景案例</h4> <ol><li>两个字段排序</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>var jsonStudents = [
  {name:&quot;Dawson&quot;, totalScore:&quot;197&quot;, Chinese:&quot;100&quot;,math:&quot;97&quot;},
  {name:&quot;HanMeiMei&quot;, totalScore:&quot;196&quot;,Chinese:&quot;99&quot;, math:&quot;97&quot;},
  {name:&quot;HanMeiMei&quot;, totalScore:&quot;196&quot;,Chinese:&quot;99&quot;, math:&quot;10&quot;},
  {name:&quot;HanMeiMei&quot;, totalScore:&quot;196&quot;,Chinese:&quot;99&quot;, math:&quot;80&quot;},
  {name:&quot;LiLei&quot;, totalScore:&quot;185&quot;, Chinese:&quot;88&quot;, math:&quot;97&quot;},
  {name:&quot;XiaoMing&quot;, totalScore:&quot;196&quot;, Chinese:&quot;96&quot;,math:&quot;100&quot;},
  {name:&quot;Jim&quot;, totalScore:&quot;196&quot;, Chinese:&quot;98&quot;,math:&quot;98&quot;},
  {name:&quot;Joy&quot;, totalScore:&quot;198&quot;, Chinese:&quot;99&quot;,math:&quot;99&quot;}];
jsonStudents.sort(function(a,b){
  var value1 = a.totalScore,
      value2 = b.totalScore;
  if(value1 === value2){
      if(b.Chinese === a.Chinese){
        return a.math - b.math;
      }
      return b.Chinese - a.Chinese;
  }
  return value2 - value1;
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ol start="2"><li>三个字段排序</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>var jsonStudents = [
  {name:&quot;Dawson&quot;, totalScore:&quot;197&quot;, Chinese:&quot;100&quot;,math:&quot;97&quot;},
  {name:&quot;HanMeiMei&quot;, totalScore:&quot;196&quot;,Chinese:&quot;99&quot;, math:&quot;97&quot;},
  {name:&quot;HanMeiMei&quot;, totalScore:&quot;196&quot;,Chinese:&quot;99&quot;, math:&quot;10&quot;},
  {name:&quot;HanMeiMei&quot;, totalScore:&quot;196&quot;,Chinese:&quot;99&quot;, math:&quot;80&quot;},
  {name:&quot;LiLei&quot;, totalScore:&quot;185&quot;, Chinese:&quot;88&quot;, math:&quot;97&quot;},
  {name:&quot;XiaoMing&quot;, totalScore:&quot;196&quot;, Chinese:&quot;96&quot;,math:&quot;100&quot;},
  {name:&quot;Jim&quot;, totalScore:&quot;196&quot;, Chinese:&quot;98&quot;,math:&quot;98&quot;},
  {name:&quot;Joy&quot;, totalScore:&quot;198&quot;, Chinese:&quot;99&quot;,math:&quot;99&quot;}];
jsonStudents.sort(function(a,b){
  var value1 = a.totalScore,
      value2 = b.totalScore;
  if(value1 === value2){
      if(b.Chinese === a.Chinese){
        return a.math - b.math;
      }
      return b.Chinese - a.Chinese;
  }
  return value2 - value1;
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="reduce-和-reduceright-迭代方法"><a href="#reduce-和-reduceright-迭代方法" aria-hidden="true" class="header-anchor">#</a> reduce() 和 reduceRight() 迭代方法</h3> <p>reduce()方法从数组的第一项开始，逐个遍历到最后。而reduceRight()则从数组的最后一项开始，向前遍历到第一项。
这两个方法都接收两个参数：一个在每一项上调用的函数和(可选的)作为归并基础的初始值。传给<code>reduce()</code>和<code>reduceRight()</code>的函数接收4个参数：前一个值、当前值、项的索引和数组对象。这个函数返回的任何值都会作为第一个参数自动传给下一项。第一次迭代发生在数组的第二项上，因此第一个参数是数组的第一项，第二个参数就是数组的第二项。
使用<code>reduce()</code>方法可以执行求数组中所有值之和的操作，如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let values = [1, 2, 3 ,4 ,5]
let sum = values.reduce((prev, cur, index, array) =&gt; {
  return prev + cur
})
console.log(sum) // 15
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>第一次执行回调函数，prev是1，cur是2。
第二次，prev是3(1+2的结果)，cur是3(数组的第三项)
这个过程会持续到把数组中的每一项都访问一遍，最后返回结果。
reduceRight()的作用类似，只不过方向相反而已。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let values = [1, 2, 3, 4, 5]
let sum = values.reduceRight((prev, cur, index, array) =&gt; {
  return prev + cur
})
console.log(sum) // 15
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在这个例子中，第一次执行回调函数，prev是5，cur是4。当然，最终结果相同，因为执行的都是简单相加的操作。</p> <p>使用<code>reduce()</code>还是<code>reduceRight()</code>，主要取决于要从哪头开始遍历数组。除此之外，他们完全相同。</p> <h2 id="number"><a href="#number" aria-hidden="true" class="header-anchor">#</a> Number</h2> <h3 id="tofixed-返回指定小数位数-返回格式为字符串"><a href="#tofixed-返回指定小数位数-返回格式为字符串" aria-hidden="true" class="header-anchor">#</a> toFixed() 返回指定小数位数(返回格式为字符串)</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>let num = 10
console.log(num.toFixed(2)) // &quot;10.00&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这里给<code>toFixed()</code>方法传入了数值2，意思是显示几位小数。于是，这个方法返回了&quot;10.00&quot;，即以0填补了必要的小数位。如果这个值本身包含的小数位数比指定的还多，那么接近指定的最大小数位的值就会舍入，如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let num = 10.005
console.log(num.toFixed(2))  //  &quot;10.01&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>注：不同浏览器给这个方法设定的舍入规则可能会有所不同，IE9以下版本会出问题。</p></div> <h2 id="math"><a href="#math" aria-hidden="true" class="header-anchor">#</a> Math</h2> <h3 id="random-随机数方法"><a href="#random-随机数方法" aria-hidden="true" class="header-anchor">#</a> random() 随机数方法</h3> <p>Math.random()方法返回大于等于0小于1的一个随机数。</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>值 = Math.floor(Math.random() * 可能值的总数 + 第一个可能的值)</p></div> <p>公式中用到了Math.floor()方法，这是因为Math.random()总返回一个小数值。而用这个小数值乘以一个整数，然后再加上一个整数，最终结果仍然还是一个小数。
举例来说，如果你想选择一个1到10之间的数值，可以：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let num = Math.floor(Math.random() * 10 + 1)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>总共有10个可能值(1到10)，而第一个可能的值是1。如果选择一个介于2到10之间的值，可以：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let num = Math.floor(Math.random() * 9 + 2)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>从2数到10要数9个数，因此可能值的总数就是9，而第一个可能值是2。多数情况下，其实都可以通过一个函数来计算可能值的总数和第一个可能的值，如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>function selectFrom(lowerValue, upperValue) {
  const choices = upperValue - lowerValue + 1
  return Math.floor(Math.random() * choices + lowerValue)
}
let num = selectFrom(2, 10)
console.log(num) // 介于2和10之间(包括2和10)的一个数值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>函数selectFrom()接受两个参数：应该返回的最小值和最大值。而用最大值减最小值再加1得到了可能值的总数，然后它又把这些数值套用到前面的公式中。这样，通过调用selectFrom(2, 10)就可以得到一个介于2和10之间(包括2和10)的数值了。利用这个函数，可以方便地从数组中随机取出一项，如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const colors = ['red', 'green', 'blue', 'yellow', 'black', 'purple', 'brown']
const color = colors[selectFrom(0, colors.length - 1)]
console.log(color)  // 可能是数组中包含的任何一个字符串
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="运算符"><a href="#运算符" aria-hidden="true" class="header-anchor">#</a> 运算符</h2> <h3 id="与-区别"><a href="#与-区别" aria-hidden="true" class="header-anchor">#</a> &amp;&amp; 与 &amp; 区别</h3> <h3 id="与"><a href="#与" aria-hidden="true" class="header-anchor">#</a> ~ 与 ~~</h3> <p><a href="https://segmentfault.com/a/1190000003731938" target="_blank" rel="noopener noreferrer">JS按位非运算符(~)及双非(~~)的使用<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://juejin.im/post/5b51e5d3f265da0f4861143c" target="_blank" rel="noopener noreferrer">JS 中可以提升幸福度的小技巧<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="文件上传"><a href="#文件上传" aria-hidden="true" class="header-anchor">#</a> 文件上传</h2> <h3 id="修改图片上传重命名"><a href="#修改图片上传重命名" aria-hidden="true" class="header-anchor">#</a> 修改图片上传重命名</h3> <p>图片重命名就是修改上传时图片文件的key值</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const newfile = new File([files[0]], this.getDate() + '-' + this.guid() + '.jpg', {type: files[0].type});

handleFileInput(files){
      const key = `${this.getDate()}/${this.guid()}.jpg`
    this.http.post('common/getQiniuUptoken', { timeStamp: +new Date()}).subscribe(res =&gt; {
      this.addFile(files.item(0), res, key)
      // this.addFile(files, res, key)
    })
  }
  clickEle() {
    document.getElementById(`${this.upId}`).click()
  }
  addFile(files, info, key) {
    this.http.postFile(files, info.data.upToken, key).subscribe(res=&gt;{
      const data = Object.assign({}, res, info.data)
      this.pic = `${data.domain}/${data.key}`;
      this.toParent.emit(data)
    })
  }

function S4() {
  return (((1+Math.random())*0x10000)|0).toString(16).substring(1);
}

function guid() {
  return (S4()+S4()+&quot;-&quot;+S4()+&quot;-&quot;+S4()+&quot;-&quot;+S4()+&quot;-&quot;+S4()+S4()+S4());
}

getDate() {
    const date = new Date()
    const year = date.getFullYear()
    const month = date.getMonth() + 1
    const day = date.getDate()
    return `${year}${month &lt; 10 ? '0' + month : month}${day &lt; 10 ? '0' + day : day}`
  }

  ----------
  postFile(fileToUpload: File, token: string, key: string): Observable&lt;any&gt; {
    const formData = new FormData();
    formData.append('file', fileToUpload);
    // formData.append('key', `mall/${fileToUpload.name}`);
    formData.append('key', `mall/${key}`);
    formData.append('token', token);
    return this.http.post('file', formData);
  }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><p><a href="https://juejin.im/post/5b32fb5cf265da598223df9e" target="_blank" rel="noopener noreferrer">JavaScript 文件对象详解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/5/2019, 3:44:40 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.d56d54d5.js" defer></script><script src="/assets/js/19.a9f7b991.js" defer></script>
  </body>
</html>
